<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hafetz Hafitz Ecosystem</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics-compat.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Rubik', sans-serif; -webkit-tap-highlight-color: transparent; overscroll-behavior-y: none; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .emoji-img { font-size: 3rem; line-height: 1; }
        @keyframes spin-slow { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .animate-spin-slow { animation: spin-slow 12s linear infinite; }
        @keyframes fade-in-up { from { opacity: 0; transform: translateY(20px) translateX(-50%); } to { opacity: 1; transform: translateY(0) translateX(-50%); } }

        /* ×¨×§×¢ ×¡×’×•×œ ×—×¦×™×œ ×¢××•×§ ×•××˜ */
        .bg-theme {
            background-color: #240a35; 
            background-image: linear-gradient(180deg, #240a35 0%, #11031a 100%);
        }
    </style>
</head>
<body class="bg-theme text-gray-100 font-sans fixed inset-0 overflow-hidden">
    <div id="root" class="h-full w-full"></div>

    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // --- ×”×’×“×¨×•×ª ××¢×§×‘ (×”× ×ª×•× ×™× ×©×”×“×‘×§×ª) ---
        const firebaseConfig = {
          apiKey: "AIzaSyDcOi6aEwWsAPAqz1_1bsxxqjj2drKrFlA",
          authDomain: "gadgetorobject.firebaseapp.com",
          projectId: "gadgetorobject",
          storageBucket: "gadgetorobject.firebasestorage.app",
          messagingSenderId: "945574243375",
          appId: "1:945574243375:web:7923c1a90d933906c1eada",
          measurementId: "G-QGJ8XZTZRL"
        };

        // --- ××ª×—×•×œ ×”××¢×¨×›×ª ---
        let analytics = null;
        try {
            if (firebaseConfig.apiKey) {
                firebase.initializeApp(firebaseConfig);
                analytics = firebase.analytics();
                console.log("Analytics Initialized ğŸš€");
            }
        } catch (e) { console.error("Analytics Error:", e); }

        const logAction = (eventName, params) => {
            if (analytics) {
                // ×“×™×•×•×— ×œ×’×•×’×œ (×¢× ××¦×‘ ×“×™×‘××’ ×›×“×™ ×©×ª×¨××” × ×ª×•× ×™× ××™×“ ×‘-DebugView)
                analytics.logEvent(eventName, { ...params, debug_mode: true });
            }
        };

        // --- ××™×™×§×•× ×™× ---
        const IconBase = ({ children, size = 24, className = "" }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>);
        const CogSimple = ({ className, size=24 }) => (<svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>);
        const Search = (props) => <IconBase {...props}><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></IconBase>;
        const ShoppingBag = (props) => <IconBase {...props}><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></IconBase>;
        const Tag = (props) => <IconBase {...props}><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></IconBase>;
        const Ticket = (props) => <IconBase {...props}><path d="M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"></path><path d="M13 5v2"></path><path d="M13 17v2"></path><path d="M13 11v2"></path></IconBase>;
        const ExternalLink = (props) => <IconBase {...props}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></IconBase>;
        const Menu = (props) => <IconBase {...props}><line x1="4" y1="12" x2="20" y2="12"></line><line x1="4" y1="6" x2="20" y2="6"></line><line x1="4" y1="18" x2="20" y2="18"></line></IconBase>;
        const X = (props) => <IconBase {...props}><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></IconBase>;
        const Star = (props) => <IconBase {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></IconBase>;
        const Briefcase = (props) => <IconBase {...props}><rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></IconBase>;
        const MessageCircle = (props) => <IconBase {...props}><path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path></IconBase>;
        const Globe = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></IconBase>;
        const SortAsc = (props) => <IconBase {...props}><path d="M15 10l-5 5-5-5"></path><path d="M4 6h16"></path></IconBase>;
        const ArrowRight = (props) => <IconBase {...props}><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></IconBase>;
        const ArrowLeft = (props) => <IconBase {...props}><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></IconBase>;
        const Share2 = (props) => <IconBase {...props}><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></IconBase>;

        // --- × ×ª×•× ×™ ×”××•×¦×¨×™× ---
        const productsData = [
             {
              id: '104',
              title: { he: '×ª×•×ª×Ÿ (×©×•×œ×£ ×ª×•×ª×™×)', en: 'Strawberry Huller' },
              price: '~5â‚ª - 8â‚ª',
              category: 'kitchen',
              image: 'ğŸ“',
              temuLink: 'https://temu.to/k/egmhtt9rzj0',
              aliLink: 'https://s.click.aliexpress.com/e/_c2yHcfCR',
              description: { he: '××•×¦×™× ××ª ×”×¢×•×§×¥ ×‘×œ×™ ×œ×œ×›×œ×š ××ª ×”×™×“×™×™×. ×’××•× ×™ ×•×¤×©×•×˜.', en: 'Removes the stem without dirtying your hands. Genius and simple.' },
              status: 'nice',
              isPinned: true, 
              dateAdded: '2023-01-01'
            },
            {
              id: '101',
              title: { he: '×©×¤×¨×™×¦×¨ ×©××Ÿ ×–×™×ª', en: 'Olive Oil Sprayer' },
              price: '~18â‚ª - 30â‚ª',
              category: 'kitchen',
              image: 'ğŸ«’',
              temuLink: 'https://temu.to/k/eskv4ma203l',
              aliLink: 'https://s.click.aliexpress.com/e/_c4OHgMnt',
              description: { he: '××ª×™×– ×©××Ÿ ×–×™×ª ×©× ×™ ××¦×‘×™×. ×—×•×¡×š ×§×œ×•×¨×™×•×ª ×•××•× ×¢ ×‘×œ××’×Ÿ.', en: 'Two-mode olive oil sprayer. Saves calories and prevents mess.' },
              status: 'high',
              dateAdded: '2023-10-25'
            },
            {
              id: '102',
              title: { he: '×¡×œ ×›×‘×™×¡×” ××ª×§×¤×œ', en: 'Collapsible Laundry Basket' },
              price: '~25â‚ª - 50â‚ª',
              category: 'home',
              image: 'ğŸ§º',
              temuLink: 'https://temu.to/k/ewtyxvdcjoc', 
              aliLink: '', 
              description: { he: '×¡×œ ×›×‘×™×¡×” ××ª×§×¤×œ ×œ×¢×•×‘×™ ×“×§. ×œ×©×™× ×œ×‘ ×œ×’×•×“×œ ×œ×¤× ×™ ×©××–××™× ×™×.', en: 'Collapsible laundry basket, folds thin. Check dimensions before ordering.' },
              status: 'high',
              dateAdded: '2023-10-26'
            },
            {
              id: '103',
              title: { he: '×ª×‘× ×™×ª ×‘×™×¦×™× × ×©×œ×¤×ª', en: 'Retractable Egg Drawer' },
              price: '~18â‚ª - 55â‚ª',
              category: 'kitchen',
              image: 'ğŸ¥š',
              temuLink: 'https://temu.to/k/ewaw38cr21j',
              aliLink: 'https://s.click.aliexpress.com/e/_c3sDh6af',
              description: { he: '××’×™×¨×” × ×©×œ×¤×ª ×œ××§×¨×¨, ×¢×•×©×” ×¡×“×¨ ×•×—×•×¡×š ××§×•×. ×”××—×™×¨ ××©×ª× ×” ×œ×¤×™ ××¡×™×œ×•×ª/×§×•××•×ª.', en: 'Retractable drawer for the fridge, organizes and saves space. Price varies by size/tiers.' },
              status: 'norm',
              dateAdded: '2023-10-27'
            },
            {
              id: '105',
              title: { he: '×¦× ×¦× ×ª ×—××•×¦×™× ××ª×”×¤×›×ª', en: 'Flipping Pickle Jar' },
              price: '~25â‚ª - 45â‚ª',
              category: 'kitchen',
              image: 'ğŸ¥’',
              temuLink: 'https://temu.to/k/el0byhgj7sy',
              aliLink: 'https://s.click.aliexpress.com/e/_c4q30Xp9',
              description: { he: '×¤×˜× ×˜ ×’××•× ×™ ×©××¤×¨×™×“ ××ª ×”××™× ××”×—××•×¦×™× ×›×©×¨×•×¦×™× ×œ× ×©× ×©, ×•××—×–×™×¨ ××•×ª× ×œ××™× ×›×©××¡×™×™××™×.', en: 'Genius patent that separates juice from pickles for serving, and flips back for storage.' },
              status: 'norm',
              dateAdded: '2023-10-28'
            },
            {
              id: '901',
              title: { he: '×œ×•×— ×§×™×¤×•×œ', en: 'Folding Board' },
              price: '~25â‚ª - 45â‚ª',
              category: 'munfatzim',
              image: 'ğŸ‘•',
              temuLink: 'https://temu.to/k/ez52sauj9vx',
              aliLink: 'https://s.click.aliexpress.com/e/_c3pziYnH',
              description: { he: '××¡×™×™×¢ ×œ×§×™×¤×•×œ ×—×•×œ×¦×•×ª ×‘×¦×•×¨×” ××¡×•×“×¨×ª ×•×™×©×¨×”. ×™×›×•×œ ×œ×¡×™×™×¢ ×œ×›× ×× ××ª× ××ª×§×©×™× ××‘×œ ×›× ×¨××” ×©×‘×¡×•×£ ×ª×¢×“×™×¤×• ×¤×©×•×˜ ×œ×§×¤×œ ×œ×‘×“.', en: 'Helps fold shirts neatly and straight. Can assist if you struggle, but you\'ll probably prefer folding manually in the end.' },
              status: 'nice',
              dateAdded: '2023-10-29'
            }
        ];

        const content = {
            he: {
                shopTitle: "×—×¤×¥",
                shopTitleSuffix: "××• ×—×¤×™×¥",
                showTitle: "×¤××§ ×‘×¡×™×¡×˜×",
                showSubtitle: "×§×™×¦×•×¨ ×ª×•×œ×“×•×ª ×”×“×¤×§×˜",
                showManifesto: "×›×©×¡×˜× ×“×¤×™×¡×˜ ××ª×•×¡×›×œ ×¢× ×ª×•×‘× ×•×ª ××•×©×—×–×•×ª\n×¤×•×’×© ××¨×‘×¢×” ×§×•××™×§××™× ××•×¤×¨×¢×™×\n×©×œ×•×§×—×™× ××ª ×”×›×œ ×œ×§×¦×”.\n×¤××§ ×‘×¡×™×¡×˜× ×”×•× ×× ×™×¤×¡×˜ ××‘×¡×•×¨×“×™\n×©××ª×¢×•×¨×¨ ×œ×—×™×™× ×›×“×™ ×œ×—×’×•×’ ××ª ×”×‘×¢×™×”,\n×œ×ª×ª ×§×¦×ª ×™×—×¡ ×œ×—×¦×™ ×”×›×•×¡ ×”×¨×™×§×”\n×•×œ× ×¡×•×ª ×œ×”× ×•×ª ×’× ×××” ×©××™×Ÿ.",
                workshopTitle: "×‘××’",
                workshopTitleSuffix: "×‘×¡×™×¡×˜×",
                navShop: "×—× ×•×ª",
                navShow: "××•×¤×¢",
                navWorkshops: "×¡×“× ××•×ª",
                searchPlaceholder: "×—×¤×© ×—×¤×¥...",
                catAll: "×”×›×œ",
                catHome: "×œ×‘×™×ª",
                catKitchen: "××˜×‘×—",
                catGadgets: "×’××“×’'×˜×™×",
                catMunfatzim: "×—×¤×™×¦×™× ××•× ×¤×¦×™×",
                recHigh: "××•××œ×¥ ×××•×“",
                recNorm: "××•××œ×¥",
                recNice: "× ×—××“",
                outOfStock: "××–×œ ×”××œ××™",
                workshopSubtitle: "×¡×“× ××•×ª ×œ××¨×’×•× ×™×",
                workshopDesc1: "×¨×•×¦×™× ×œ×”×›× ×™×¡ ×‘××’ ×‘×¡×™×¡×˜× ×©×œ ×”××¨×’×•×Ÿ ×©×œ×›×?",
                workshopDesc2: "×œ×”×¢×™×¨ ××ª ×”×¦×•×•×ª, ×œ×©×‘×•×¨ ××ª ×”×©×’×¨×” ×•×œ×”×ª×—×‘×¨ ××—×“×© ×“×¨×š ×”×•××•×¨?",
                workshopMain: "×¡×“× ××•×ª ×—×©×™×‘×” ×™×¦×™×¨×ª×™×ª, ××™××¤×¨×•×‘ ×•×¡×˜×•×¨×™×˜×œ×™× ×’ ×‘×”× ×—×™×™×ª ×’×™× ×›×”×Ÿ.",
                workshopBullet1: "×©×™×¤×•×¨ ×”×ª×§×©×•×¨×ª ×‘×¦×•×•×ª",
                workshopBullet2: "×¤×™×ª×•×— ×™×¦×™×¨×ª×™×•×ª ×•×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª",
                workshopBullet3: "×”××•×Ÿ ×”×•××•×¨ ×•×›×™×£",
                workshopCTA: "×“×‘×¨×• ××™×ª×™ ×‘×•×•××˜×¡××¤",
                priceDisclaimer: "* ×”××—×™×¨×™× ××©×•×¢×¨×™× ×•×¢×©×•×™×™× ×œ×”×©×ª× ×•×ª ×‘×”×ª×× ×œ×¡×¤×§, ×œ××™×“×•×ª ×•×œ××œ××™.",
                sortBy: "××™×•×Ÿ ×œ×¤×™ ×-×‘",
                backToCatalog: "×—×–×¨×” ×œ×§×˜×œ×•×’ ×”××œ×",
                directLinkTitle: "×”×™×™! ×”× ×” ×”×—×¤×¥ ×©×—×™×¤×©×ª:",
                buyOnAli: "×§× ×” ×‘-AliExpress",
                buyOnTemu: "×§× ×” ×‘-Temu",
                linkCopied: "×”×§×™×©×•×¨ ×”×•×¢×ª×§! ×”×•×“×‘×§ ×‘×•×•××˜×¡××¤ :)"
            },
            en: {
                shopTitle: "Hafetz",
                shopTitleSuffix: "Hafitz",
                showTitle: "Fuck BaSystem",
                showSubtitle: "A Brief History of the Defect",
                showManifesto: "When a frustrated stand-up comedian with sharp insights\nmeets four disturbed comedians\nwho take everything to the edge.\nFuck BaSystem is an absurd manifesto\ncoming to life to celebrate the problem,\ngive some attention to the empty half of the glass\nand try to enjoy what isn't there.",
                workshopTitle: "Bug",
                workshopTitleSuffix: "In The System",
                navShop: "Shop",
                navShow: "Show",
                navWorkshops: "Workshops",
                searchPlaceholder: "Search item...",
                catAll: "All",
                catHome: "Home",
                catKitchen: "Kitchen",
                catGadgets: "Gadgets",
                catMunfatzim: "Useless Gadgets",
                recHigh: "Highly Recommended",
                recNorm: "Recommended",
                recNice: "Nice to Have",
                outOfStock: "Out of Stock",
                workshopSubtitle: "Corporate Workshops",
                workshopDesc1: "Want to introduce a bug into your organization's system?",
                workshopDesc2: "Wake up the team, break the routine, and reconnect through humor?",
                workshopMain: "Creative thinking, improv, and storytelling workshops led by Guy Cohen.",
                workshopBullet1: "Improving team communication",
                workshopBullet2: "Developing creativity & problem solving",
                workshopBullet3: "Lots of humor and fun",
                workshopCTA: "Talk to me on WhatsApp",
                priceDisclaimer: "* Prices are estimated and subject to change by supplier, size and stock.",
                sortBy: "Sort A-Z",
                backToCatalog: "Back to Full Catalog",
                directLinkTitle: "Hey! Here is the item you looked for:",
                buyOnAli: "Buy on AliExpress",
                buyOnTemu: "Buy on Temu",
                linkCopied: "Link Copied! Ready to paste."
            }
        };

        const App = () => {
          const [activeTab, setActiveTab] = useState('products');
          const [searchTerm, setSearchTerm] = useState('');
          const [selectedCategory, setSelectedCategory] = useState('all');
          const [isMenuOpen, setIsMenuOpen] = useState(false);
          const [lang, setLang] = useState('he'); 
          const [sortOrder, setSortOrder] = useState('default');
          const [landingProduct, setLandingProduct] = useState(null);
          const [showToast, setShowToast] = useState(false);

          useEffect(() => {
              const params = new URLSearchParams(window.location.search);
              const id = params.get('id');
              if (id) {
                  const found = productsData.find(p => p.id === id);
                  if (found) {
                      setLandingProduct(found);
                  }
              }
              document.documentElement.dir = lang === 'he' ? 'rtl' : 'ltr';
              document.documentElement.lang = lang;
          }, [lang]);

          const t = content[lang];

          const filteredAndSortedProducts = useMemo(() => {
            let filtered = productsData.filter(product => {
                const title = product.title[lang].toLowerCase();
                const desc = product.description[lang].toLowerCase();
                const search = searchTerm.toLowerCase();
                const matchesSearch = title.includes(search) || desc.includes(search);
                
                let matchesCategory = false;
                if (selectedCategory === 'all') {
                    matchesCategory = product.category !== 'munfatzim'; 
                } else {
                    matchesCategory = product.category === selectedCategory;
                }
                
                return matchesSearch && matchesCategory;
            });

            if (sortOrder === 'az') {
                filtered.sort((a, b) => a.title[lang].localeCompare(b.title[lang]));
            } else {
                filtered.sort((a, b) => {
                    if (a.isPinned && !b.isPinned) return -1;
                    if (!a.isPinned && b.isPinned) return 1;
                    if (a.isPinned && b.isPinned) return 0;
                    return new Date(a.dateAdded) - new Date(b.dateAdded);
                });
            }
            return filtered;
          }, [searchTerm, selectedCategory, lang, sortOrder]);

          const getHeaderContent = () => {
            if (activeTab === 'tickets') {
              return (
                <div className="flex items-center gap-2 animate-in fade-in duration-300">
                   <div className="w-8 h-8 bg-pink-600 rounded-sm flex items-center justify-center rotate-3 transition-transform">
                      <span className="text-xl">ğŸ­</span>
                   </div>
                   <div className="flex flex-col justify-center items-start">
                      <h1 className="font-bold text-lg tracking-tighter text-white leading-none">{t.showTitle}</h1>
                      <span className="text-[10px] text-pink-400 font-medium leading-none tracking-wide pt-0.5">{t.showSubtitle}</span>
                   </div>
                </div>
              );
            }
            if (activeTab === 'workshops') {
              return (
                <div className="flex items-center gap-2 animate-in fade-in duration-300">
                   <div className="w-8 h-8 bg-[#0891b2] rounded-sm flex items-center justify-center -rotate-3 transition-transform">
                      <span className="text-xl">ğŸ’¼</span>
                   </div>
                   <h1 className="font-bold text-xl tracking-tighter text-white">{t.workshopTitle} <span className="text-cyan-400">{t.workshopTitleSuffix}</span></h1>
                </div>
              );
            }
            return (
              <div className="flex items-center gap-2 animate-in fade-in duration-300">
                <div className="w-8 h-8 bg-purple-500 rounded-sm flex items-center justify-center rotate-3 hover:rotate-0 transition-transform shadow-lg shadow-purple-500/30">
                  <span className="text-xl">ğŸ“¦</span>
                </div>
                {/* ×œ×•×’×• ×œ×‘×Ÿ × ×§×™ */}
                <h1 className="font-black text-xl tracking-tighter text-white drop-shadow-md">{t.shopTitle} <span className="font-light text-purple-200">{t.shopTitleSuffix}</span></h1>
              </div>
            );
          };

          const toggleLang = () => {
              setLang(prev => prev === 'he' ? 'en' : 'he');
              setIsMenuOpen(false);
          };

          const copyLink = (id) => {
              const url = window.location.origin + '/?id=' + id;
              const input = document.createElement('input');
              input.style.position = 'fixed';
              input.style.opacity = '0';
              input.value = url;
              document.body.appendChild(input);
              input.select();
              try {
                  document.execCommand('copy');
                  setShowToast(true);
                  setTimeout(() => setShowToast(false), 3000);
                  logAction('share_link', { id });
              } catch (err) {
                  alert('×”×¢×ª×§×” ×™×“× ×™×ª: ' + url);
              } finally {
                  document.body.removeChild(input);
              }
          };

          // --- ×ª×¦×•×’×ª ×“×£ ××•×¦×¨ ×‘×•×“×“ ---
          if (landingProduct) {
              return (
                <div className="flex flex-col h-full bg-theme text-gray-100 font-sans selection:bg-purple-500 selection:text-white" dir={lang === 'he' ? 'rtl' : 'ltr'}>
                    <div className="flex-none bg-black/20 backdrop-blur border-b border-white/5 py-3 px-4 flex items-center justify-between shadow-lg z-50">
                        <div className="flex items-center gap-2">
                            <CogSimple size={18} className="text-white/80 animate-spin-slow" />
                            <span className="font-bold tracking-[0.2em] text-white/60 text-xs uppercase">Ecosystem</span>
                        </div>
                        <button onClick={() => { window.history.replaceState({}, '', '/'); setLandingProduct(null); }} className="text-white/60 hover:text-white flex items-center gap-1 text-sm font-medium transition-colors">
                            {lang === 'he' ? <ArrowRight size={16}/> : <ArrowLeft size={16}/>}
                            {t.backToCatalog}
                        </button>
                    </div>

                    <main className="flex-1 overflow-y-auto p-6 flex flex-col items-center justify-center max-w-md mx-auto w-full">
                        <div className="w-full space-y-6 animate-in zoom-in-95 duration-500">
                            <div className="text-center space-y-2">
                                <h2 className="text-white/60 text-sm font-medium">{t.directLinkTitle}</h2>
                                <h1 className="text-3xl font-black text-white leading-tight drop-shadow-lg">{landingProduct.title[lang]}</h1>
                            </div>

                            {/* ×›×¨×˜×™×¡×™×™×ª ×“×£ × ×—×™×ª×” - ×¡×’×•×œ ×‘×”×™×¨ ××˜ */}
                            <div className="bg-[#3b2152] rounded-3xl p-8 text-center shadow-2xl relative overflow-hidden group border border-white/5">
                                <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-500 via-pink-500 to-yellow-400 opacity-70"></div>
                                <div className="text-8xl mb-6 drop-shadow-2xl transition-transform duration-500 group-hover:scale-110">{landingProduct.image}</div>
                                <div className="inline-block bg-black/40 text-yellow-300 border border-white/10 px-4 py-1.5 rounded-full text-lg font-mono font-bold mb-4 shadow-lg">
                                    {landingProduct.price}
                                </div>
                                <p className="text-gray-100 text-lg leading-relaxed font-light">
                                    {landingProduct.description[lang]}
                                </p>
                            </div>

                            <div className="space-y-3">
                                {landingProduct.temuLink && (
                                    <a href={landingProduct.temuLink} target="_blank" onClick={() => logAction('click_temu', { id: landingProduct.id })} className="block w-full bg-gradient-to-r from-[#fb7701] to-[#ff9900] hover:from-[#e06a00] hover:to-[#e06a00] text-white font-bold py-4 rounded-xl shadow-lg transform transition active:scale-95 flex items-center justify-center gap-3 text-lg border border-white/10">
                                        <Tag size={24} /> {t.buyOnTemu}
                                    </a>
                                )}
                                {landingProduct.aliLink && (
                                    <a href={landingProduct.aliLink} target="_blank" onClick={() => logAction('click_ali', { id: landingProduct.id })} className="block w-full bg-gradient-to-r from-[#ff4747] to-[#ff2d1d] hover:from-[#d63b3b] hover:to-[#d63b3b] text-white font-bold py-4 rounded-xl shadow-lg transform transition active:scale-95 flex items-center justify-center gap-3 text-lg border border-white/10">
                                        <ExternalLink size={24} /> {t.buyOnAli}
                                    </a>
                                )}
                            </div>
                            
                            <div className="text-center pt-8">
                                <button onClick={() => { window.history.replaceState({}, '', '/'); setLandingProduct(null); }} className="text-white/50 hover:text-white underline text-sm transition-colors">
                                    {t.backToCatalog}
                                </button>
                            </div>
                        </div>
                    </main>
                </div>
              );
          }

          // --- ×”×ª×¦×•×’×” ×”×¨×’×™×œ×” ---
          return (
            <div className="flex flex-col h-full bg-theme text-gray-100 font-sans selection:bg-purple-500 selection:text-white" dir={lang === 'he' ? 'rtl' : 'ltr'}>
              
              {/* Toast Notification */}
              {showToast && (
                  <div className="fixed bottom-20 left-1/2 -translate-x-1/2 z-[100] bg-[#0f0418] text-white px-4 py-2 rounded-full shadow-2xl border border-white/10 flex items-center gap-2 animate-[fade-in-up_0.3s_ease-out]">
                      <span className="text-green-400">âœ“</span> {t.linkCopied}
                  </div>
              )}

              {/* Super Header - × ×§×™ ×•××™× ×™××œ×™×¡×˜×™ */}
              <div className="flex-none bg-black/20 border-b border-white/5 py-1.5 px-4 flex items-center justify-center gap-2 relative overflow-hidden shadow-sm z-[60]">
                 <div className="flex items-center gap-2 relative z-10">
                    <CogSimple size={14} className="text-white/70 animate-spin-slow" />
                    <span className="font-bold tracking-[0.2em] text-white/50 text-[10px] uppercase">Ecosystem</span>
                 </div>
                 <div className="absolute ltr:left-4 rtl:left-4 top-1/2 -translate-y-1/2 text-[9px] text-white/30 font-mono tracking-widest hidden sm:block">V 2.5</div>
                 <button onClick={toggleLang} className="absolute ltr:right-4 rtl:right-4 top-1/2 -translate-y-1/2 text-[10px] font-bold text-white/50 hover:text-white transition-colors border border-white/10 px-2 py-0.5 rounded">
                    {lang === 'he' ? 'EN' : 'HE'}
                 </button>
              </div>

              {/* Header */}
              <header className="flex-none sticky top-0 z-50 bg-[#240a35]/95 backdrop-blur border-b border-white/5 shadow-lg h-16">
                <div className="max-w-md mx-auto px-4 h-full flex items-center justify-between">
                  {getHeaderContent()}
                  <button onClick={() => setIsMenuOpen(!isMenuOpen)} className="p-2 hover:bg-white/5 rounded-full transition-colors text-white/80">
                    {isMenuOpen ? <X size={24} /> : <Menu size={24} />}
                  </button>
                </div>
                {isMenuOpen && (
                  <div className="absolute top-16 left-0 right-0 bg-[#240a35] border-b border-white/10 p-4 shadow-2xl animate-in slide-in-from-top-5 z-50">
                    <nav className="flex flex-col gap-2">
                      <button onClick={toggleLang} className="p-3 text-start hover:bg-white/5 rounded-lg flex items-center gap-3 font-bold border border-white/10 justify-center mb-2 text-white/80">
                        <Globe size={20} /> {lang === 'he' ? 'Switch to English' : '×¢×‘×•×¨ ×œ×¢×‘×¨×™×ª'}
                      </button>
                      <button onClick={() => {setActiveTab('products'); setIsMenuOpen(false)}} className="p-3 text-start hover:bg-white/5 rounded-lg flex items-center gap-3 text-gray-100"><ShoppingBag size={20} className="text-yellow-400" /> {t.navShop}</button>
                      <button onClick={() => {setActiveTab('tickets'); setIsMenuOpen(false)}} className="p-3 text-start hover:bg-white/5 rounded-lg flex items-center gap-3 text-gray-100"><Ticket size={20} className="text-pink-500" /> {t.navShow}</button>
                      <button onClick={() => {setActiveTab('workshops'); setIsMenuOpen(false)}} className="p-3 text-start hover:bg-white/5 rounded-lg flex items-center gap-3 text-gray-100"><Briefcase size={20} className="text-cyan-400" /> {t.navWorkshops}</button>
                    </nav>
                  </div>
                )}
              </header>

              {/* Main Content */}
              <main className="flex-1 overflow-y-auto relative w-full max-w-md mx-auto">
                {activeTab === 'products' && (
                  <div className="p-4 space-y-4 pb-6">
                    <div className="flex gap-2 items-center">
                        <div className="relative group flex-1">
                          <input type="text" placeholder={t.searchPlaceholder} className="w-full bg-white/5 border border-white/10 rounded-xl py-3 ltr:pr-4 ltr:pl-10 rtl:pr-10 rtl:pl-4 text-white placeholder-white/30 focus:outline-none focus:border-purple-500/50 focus:ring-1 focus:ring-purple-500/50 transition-all" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} />
                          <Search className={`absolute top-3.5 text-white/30 group-focus-within:text-purple-400 transition-colors ${lang === 'he' ? 'right-3' : 'left-3'}`} size={20} />
                        </div>
                        <button onClick={() => setSortOrder(prev => prev === 'default' ? 'az' : 'default')} className={`p-3 rounded-xl border border-white/10 transition-colors ${sortOrder === 'az' ? 'bg-yellow-400 text-black border-yellow-400' : 'bg-white/5 text-white/50 hover:bg-white/10'}`} title={t.sortBy}><SortAsc size={20} /></button>
                    </div>

                    <div className="flex gap-2 overflow-x-auto pb-2 scrollbar-hide">
                      {['all', 'home', 'kitchen', 'munfatzim'].map((cat) => (
                        <button key={cat} onClick={() => setSelectedCategory(cat)} className={`px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap transition-all border border-white/10 ${selectedCategory === cat ? 'bg-white/10 text-white shadow-lg border-white/20' : 'bg-transparent text-white/50 hover:bg-white/5'}`}>
                            {cat === 'all' ? t.catAll : cat === 'home' ? t.catHome : cat === 'kitchen' ? t.catKitchen : cat === 'munfatzim' ? (<span>ğŸ‘» {t.catMunfatzim}</span>) : t.catGadgets}
                        </button>
                      ))}
                    </div>

                    <div className="grid gap-4">
                      {filteredAndSortedProducts.map((product) => (
                        <div key={product.id} className="bg-[#3b2152] rounded-2xl overflow-hidden shadow-md hover:shadow-lg transition-all group relative border border-white/5">
                          {product.isPinned && sortOrder === 'default' && (
                              <div className={`absolute top-2 ${lang === 'he' ? 'left-2' : 'right-2'} z-10`}>
                                  <span className="text-yellow-400 drop-shadow-md filter saturate-150">ğŸ“Œ</span>
                              </div>
                          )}
                          
                          <div className="p-4 flex gap-4">
                            <div className="w-20 h-20 bg-black/20 rounded-xl flex items-center justify-center text-4xl shadow-inner shadow-black/30 shrink-0 group-hover:scale-105 transition-transform emoji-img border border-white/5">
                                {product.image}
                            </div>
                            <div className="flex-1 min-w-0">
                              <div className="flex justify-between items-start">
                                  <h3 className="font-bold text-gray-100 truncate">{product.title[lang]}</h3>
                                  <span className="bg-black/20 text-white/70 border border-white/5 px-2 py-0.5 rounded text-sm font-mono tracking-tight whitespace-nowrap">{product.price}</span>
                              </div>
                              <p className="text-xs text-white/50 mt-1 line-clamp-2 font-light">{product.description[lang]}</p>
                              
                              <div className="mt-2 flex items-center gap-2 flex-wrap">
                                 {product.status === 'high' && <span className="text-[10px] bg-green-900/20 text-green-300 border border-green-500/20 px-2 py-0.5 rounded flex items-center gap-1"><Star size={10} fill="currentColor" /> {t.recHigh}</span>}
                                 {product.status === 'norm' && <span className="text-[10px] bg-yellow-400/10 text-yellow-200 border border-yellow-500/20 px-2 py-0.5 rounded flex items-center gap-1">âš¡ {t.recNorm}</span>}
                                 {product.status === 'nice' && <span className="text-[10px] bg-blue-900/20 text-blue-300 border border-blue-500/20 px-2 py-0.5 rounded flex items-center gap-1">ğŸ‘ {t.recNice}</span>}
                              </div>
                            </div>
                          </div>
                          
                          <div className="grid grid-cols-[1fr_auto_1fr] divide-x divide-x-reverse divide-white/5 border-t border-white/5">
                            {/* AliExpress Link */}
                            <div className="flex justify-center items-center py-3 hover:bg-white/5 transition-colors group/ali">
                                {product.aliLink ? (
                                    <a href={product.aliLink} target="_blank" onClick={() => logAction('click_ali', { id: product.id })} className="flex items-center gap-2 text-sm font-medium text-[#ff4747] group-hover/ali:brightness-110 flex-1 justify-center h-full">
                                        <ExternalLink size={14} /> AliExpress
                                    </a>
                                ) : (
                                    <span className="flex items-center gap-2 text-sm font-medium text-zinc-600 cursor-not-allowed justify-center">
                                        {t.outOfStock}
                                    </span>
                                )}
                            </div>

                            {/* Share Button (Middle) */}
                            <div className="flex justify-center items-center px-2">
                                <button 
                                    onClick={(e) => { e.stopPropagation(); e.preventDefault(); copyLink(product.id); }}
                                    className="p-1.5 text-white/30 hover:text-white hover:bg-white/10 rounded-full transition-colors"
                                    title="×”×¢×ª×§ ×§×™×©×•×¨"
                                >
                                    <Share2 size={16} />
                                </button>
                            </div>

                            {/* Temu Link */}
                            <div className="flex justify-center items-center py-3 hover:bg-white/5 transition-colors group/temu">
                                {product.temuLink ? (
                                    <a href={product.temuLink} target="_blank" onClick={() => logAction('click_temu', { id: product.id })} className="flex items-center gap-2 text-sm font-medium text-yellow-400 group-hover/temu:text-yellow-300 flex-1 justify-center h-full">
                                        <Tag size={14} /> Temu
                                    </a>
                                ) : (
                                    <span className="flex items-center gap-2 text-sm font-medium text-zinc-600 cursor-not-allowed justify-center">
                                        {t.outOfStock}
                                    </span>
                                )}
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                    <div className="mt-6 p-4 text-center"><p className="text-[10px] text-white/30">{t.priceDisclaimer}</p></div>
                  </div>
                )}

                {activeTab === 'tickets' && (
                  <div className="p-4 pb-6 animate-in fade-in zoom-in-95 duration-300">
                    <div className="bg-gradient-to-br from-[#1a0b2e] to-[#0f0418] border border-pink-500/20 rounded-3xl p-6 text-center space-y-6 relative overflow-hidden shadow-2xl">
                      <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-pink-500 via-purple-500 to-yellow-500"></div>
                      
                      <div className="w-full aspect-video bg-black/40 rounded-xl overflow-hidden flex items-center justify-center relative shadow-lg border border-white/5">
                          <img 
                            src="show.jpg" 
                            alt="×¤×•×¡×˜×¨ ×”××•×¤×¢" 
                            className="w-full h-full object-cover"
                            onError={(e) => {
                                e.target.onerror = null;
                                e.target.src = 'https://placehold.co/600x400/2a0a3d/FFF?text=Show+Image';
                            }}
                          />
                      </div>

                      <div className="space-y-2 relative z-10">
                        <h2 className="text-3xl font-black tracking-tighter text-white drop-shadow-lg leading-tight">
                          {t.showTitle}
                          <br/>
                          <span className="text-xl font-medium text-pink-400">{t.showSubtitle}</span>
                        </h2>
                        <div className="inline-block px-4 py-1 rounded-full bg-pink-900/30 text-pink-300 font-bold text-sm border border-pink-500/20">
                           ×¡×˜× ×“××¤ ×ª×™××˜×¨×œ×™
                        </div>
                      </div>

                      <div className="text-gray-300 text-sm leading-relaxed whitespace-pre-line font-light opacity-90">
                        {t.showManifesto}
                      </div>

                      <a href="https://linktr.ee/FuckBaSystem" target="_blank" onClick={() => logAction('click_tickets', {})} className="w-full bg-pink-600 hover:bg-pink-500 text-white font-bold py-4 rounded-xl shadow-lg shadow-pink-900/50 transform transition hover:-translate-y-1 active:translate-y-0 flex items-center justify-center gap-2">
                        <Ticket size={20} />
                        ×œ×›×¨×˜×™×¡×™× ×•×¤×¨×˜×™× × ×•×¡×¤×™×
                      </a>
                    </div>
                  </div>
                )}

                {activeTab === 'workshops' && (
                  <div className="p-4 pb-6 animate-in fade-in zoom-in-95 duration-300">
                    <div className="bg-gradient-to-br from-[#0c4a6e] to-[#082f49] border border-cyan-500/30 rounded-3xl p-6 text-center space-y-6 relative overflow-hidden shadow-2xl">
                      <div className="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-cyan-400 via-blue-500 to-cyan-300 opacity-60"></div>
                      <div className="w-16 h-16 bg-[#0e7490]/40 rounded-2xl mx-auto flex items-center justify-center text-cyan-200 mb-2 border border-cyan-500/30 shadow-lg shadow-cyan-500/20"><Briefcase size={32} /></div>
                      <div className="space-y-2 relative z-10"><h2 className="text-3xl font-black tracking-tighter text-white drop-shadow-lg">{t.workshopTitle} {t.workshopTitleSuffix}</h2><span className="text-xs font-bold text-cyan-200 bg-[#164e63]/60 border border-cyan-500/30 px-3 py-1 rounded-full uppercase tracking-wider">{t.workshopSubtitle}</span></div>
                      <div className="space-y-4 text-gray-100 text-sm leading-relaxed font-light"><p>{t.workshopDesc1}<br/>{t.workshopDesc2}</p><p className="font-bold text-white">{t.workshopMain}</p><ul className="text-start space-y-2 bg-black/20 p-4 rounded-xl border border-cyan-500/20 mx-2"><li className="flex items-center gap-2"><div className="w-1.5 h-1.5 bg-cyan-400 rounded-full flex-shrink-0"></div> {t.workshopBullet1}</li><li className="flex items-center gap-2"><div className="w-1.5 h-1.5 bg-cyan-400 rounded-full flex-shrink-0"></div> {t.workshopBullet2}</li><li className="flex items-center gap-2"><div className="w-1.5 h-1.5 bg-cyan-400 rounded-full flex-shrink-0"></div> {t.workshopBullet3}</li></ul></div>
                      {/* ×”×•×¨××•×ª ×œ×”×—×œ×¤×ª ××¡×¤×¨ ×˜×œ×¤×•×Ÿ:
                          1. ×©× ×” ××ª ×”××¡×¤×¨ ×œ××˜×” (9725XXXXXXXX) ×œ××¡×¤×¨ ×”×××™×ª×™ ×©×œ×š.
                          2. ××œ ×ª×©×›×— ××ª ×”×§×™×“×•××ª 972 ×‘×”×ª×—×œ×” (×‘×œ×™ ××¤×¡).
                      */}
                      <a href="https://wa.me/972500000000" target="_blank" onClick={() => logAction('click_whatsapp', {})} className="w-full bg-cyan-600 hover:bg-cyan-500 text-white font-bold py-4 rounded-xl shadow-lg shadow-cyan-900/50 transform transition hover:-translate-y-1 active:translate-y-0 flex items-center justify-center gap-2">
                        <MessageCircle size={20} />
                        {t.workshopCTA}
                      </a>
                    </div>
                  </div>
                )}

              </main>

              <nav className="flex-none bg-[#2D1B4E] border-t border-white/5 h-16 max-w-md mx-auto w-full flex justify-around items-center z-50">
                <button onClick={() => { setActiveTab('products'); logAction('nav_click', { tab: 'products' }); }} className={`flex flex-col items-center gap-1 p-2 w-16 transition-colors ${activeTab === 'products' ? 'text-yellow-400 drop-shadow-[0_0_8px_rgba(250,204,21,0.3)]' : 'text-white/30 hover:text-white/60'}`}><ShoppingBag size={22} /><span className="text-[10px] font-medium">{t.navShop}</span></button>
                <button onClick={() => { setActiveTab('tickets'); logAction('nav_click', { tab: 'tickets' }); }} className={`flex flex-col items-center gap-1 p-2 w-16 transition-colors ${activeTab === 'tickets' ? 'text-pink-500 drop-shadow-[0_0_8px_rgba(236,72,153,0.3)]' : 'text-white/30 hover:text-white/60'}`}><Ticket size={22} /><span className="text-[10px] font-medium">{t.navShow}</span></button>
                <button onClick={() => { setActiveTab('workshops'); logAction('nav_click', { tab: 'workshops' }); }} className={`flex flex-col items-center gap-1 p-2 w-16 transition-colors ${activeTab === 'workshops' ? 'text-cyan-400 drop-shadow-[0_0_8px_rgba(34,211,238,0.3)]' : 'text-white/30 hover:text-white/60'}`}><Briefcase size={22} /><span className="text-[10px] font-medium">{t.navWorkshops}</span></button>
              </nav>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
